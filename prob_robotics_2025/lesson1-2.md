---
marp: true
---

<!-- footer: 確率ロボティクス第1回（その2） -->

# 確率ロボティクス第1回（その2）: <br />統計の基礎と代表値

千葉工業大学 上田 隆一

<br />

<p style="font-size:50%">
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
</p>

---

<!-- paginate: true -->

## 今回の内容

- 代表値
- データのばらつき
- ロボットとデータ

---

## 代表値

---

### 代表値ってなに?

- まず挙がるもの: 平均値、中央値、最頻値
    - 統計の講義を受けたことがあれば誰でも知っている
- 安心して寝るのはまだ早い
    - ちゃんと使いこなしてますか?

---

### データの表現

- なにかデータがあったとしましょう
    - データの列を$x_{1:N} = \{x_1, x_2, x_3, \dots, x_N\}$と表す
        - とりあえずデータは数値だと仮定
- 例（教科書より）: Aさん、B君が自作のロボットでコースを何周できるか
挑戦したときの結果
    - $a_{1:10} = \{2, 3, 1, 5, 0, 3, 7, 2, 4, 1\}$
    - $b_{1:7} = \{5, 3, 6, 4, 2, 5, 4\}$
- 用語
    - データを1個とるために何かを試すこと: <span style="color:red">試行</span>
    - 試行で観測された現象: <span style="color:red">事象</span>（数値とは限らないので注意）

---

### ここでの問題

- 前ページの例、どっちの結果の方がいいのか？
    - $a_{1:10} = \{2, 3, 1, 5, 0, 3, 7, 2, 4, 1\}$
    - $b_{1:7} = \{5, 3, 6, 4, 2, 5, 4\}$
- 「もっと試行しないと分からない」という話は横において、
どう比較あるいは分析するか？（考えてみましょう）
    * <span style="color:red">代表値を使う</span>のが初歩

---

### 代表値: データの特徴を1つの数値で表現したもの

- 代表的な代表値:
    - <span style="color:red">平均値</span>: データをすべて足して、データの個数で割ったもの
        - $\bar{x}_{1:N} = \dfrac{x_1 + x_2 + \dots + x_N}{N} = \dfrac{1}{N} \sum_{i=1}^N x_i$
    - <span style="color:red">最大値・最小値</span>: データ中で最大、最小の値（トートロジーになってますが）
        - それぞれ$\max{x}_{1:N}, \min{x}_{1:N}$と表記
    - <span style="color:red">中央値</span>: データを数値の大きさで順に並べた時に順番が中央にきたデータの値
        - データの個数が偶数のときは中央の2つを足して2で割る
    - <span style="color:red">最頻値</span>: データ列中で最も個数の多い値
        - 複数のときはぜんぶが最頻値

---

### 問題

- 前ページのAさん、B君のデータに対してこれらを求めてみましょう
    - $a_{1:10} = \{2, 3, 1, 5, 0, 3, 7, 2, 4, 1\}$
    - $b_{1:7} = \{5, 3, 6, 4, 2, 5, 4\}$
* 答え
    |     |平均値|最大値|最小値|中央値|最頻値|
    |:--:|:--:|:--:|:--:|:--:|:--:|
    |Aさん|2.8|**7**|0|2.5|1, 2, 3|
    |B君|**4.1**|6|**2**|**4**|4, 5|
    - <span style="color:red">計算は簡単だが、何がこれから言えるだろうか？</span>（考えてみましょう）

---

### 言えること

- ある代表値に対する優劣
    - 平均値はB君のほうがよい
    - 最大値はAさんのほうがよいけど、Aさんのほうが試行が3回多い
- 分析と改善へのヒント（これが一番重要）
    - Aさんのロボットは最大値が7と周回を重ねられることもあるが、
    平均値や最小値が小さく早くリタイヤしやすいので原因を調べたほうがいい
    - B君のロボットは平均値や最小値を見ると安定しているが、
    5, 6周より多く周れない原因を調べたほうが良い
- <span style="color:red">言ってはいけないこと（代表値の誤用）</span>
    - 平均値が良いからB君のロボットの方がよい
    - 最大値が良いからAさんのロボットの方がよい

---

### 代表値を使うのは難しい

- 代表値は元のデータの劣化した姿
    - 情報理論だと「データの不可逆圧縮」に相当
    - たくさんのデータを1つで置き換えれば情報量が減る
- 判断材料にすることで代表値は意味を持つ
    - 代表値よりも、それから推測される原因への考察が重要
    - 講義前半で言ったように統計は不真面目
- 優劣を決めるならルールや実験条件の整備が必要
    - それでもなにをもって優れているとするかは、統計は答えを持たない
    - 相手をやり込めるために持ち出しがちだが不適切な場合のほうが多い

---

##  データのばらつきを表す指標

---

### 先ほどのAさん、B君の結果の考察から

- Aさんの最大値、最小値の開きが大きいことが指摘されていた
- 確かにAさんの各周回数は、B君のものに比べて互いに
差が大きい（<span style="color:red">ばらついている</span>）
    - $a_{1:10} = \{2, 3, 1, 5, 0, 3, 7, 2, 4, 1\}$
    - $b_{1:7} = \{5, 3, 6, 4, 2, 5, 4\}$
- ここでの問題: 最大値-最小値だけでなくデータ全体をつかって
「ばらつき」を数値化できないか？
    - 最大値-最小値だと1, 2個の極端な数値に左右されやすい

---

### 分散（不偏分散）

- 最も一般的なばらつきの指標
- 平均値と各データの<span style="color:red">差の2乗</span>の平均値<span style="font-size:70%">（よりちょっと大きい値）</span>
    - $s^2 = \dfrac{1}{N-1}\sum_{i=1}^{N} ( x_i - \bar{x})^2$
        - 不偏分散と呼ばれる値（分母が$N$だと標本分散）
        - 論文の実験結果に「分散」として書いてあるのは不偏分散の値
- なんで$N-1$？
    - 平均値$\bar{x}$もばらついていて定かではないので、
    その分だけ値が大きくなる（「ロボットの確率・統計」の3.3.4項）
- なんで2乗？
    - いろいろ計算の上で都合がよい（なんらかの本質性がある）

---

### 問題

- Aさん、B君のデータの不偏分散を求めてみましょう
    - どっちが大きいでしょうか？
        - $a_{1:10} = \{2, 3, 1, 5, 0, 3, 7, 2, 4, 1\}$
        - $b_{1:7} = \{5, 3, 6, 4, 2, 5, 4\}$
    - 道具は手計算、表計算、シェル芸なんでもどうぞ
    - 式（再掲）: $s^2 = \dfrac{1}{N-1}\sum_{i=1}^{N} ( x_i - \bar{x})^2$
- 答え
    * Aさん: $4.4$
    * B君: $1.8$

---

### 標準偏差

- 分散の正の平方根
    - 式（分散の式に$\sqrt{\quad}$をかぶせただけ）
        - $s = \sqrt{\dfrac{1}{N-1}\sum_{i=1}^{N} ( x_i - \bar{x})^2}$
    - 問題: Aさんの分散が$4.4$、B君の分散が$1.8$のとき標準偏差は？
        * Aさん: $2.1$、B君: $1.3$
- なんで分散があるのに標準偏差を考えるのか（考えてみましょう）
    * もとのデータと単位が揃うから人と話をしやすい
        - AさんB君の例だと分散の単位は「周$^2$」になるのでよくわからない
        - 「Aさんのロボットはどれだけ周数がばらつくの？」と聞かれたら
        「だいたい2周」と答えておけばよい

---

## ロボットとデータ


---

### ロボットと代表値


---

-  代表値 ---統計の知識がないと喧嘩になる
    -   textcolor redデータの偏りと外れ値
        -   textcolor redデータの偏り
            -  textcolor red偏りと校正
            -  textcolor redロボットが動作中に起こる偏り
        -  外れ値
    -  まとめ

